{"version":3,"sources":["../dist-esnext/Battle.test.js"],"names":["battle","Field","describe","fieldConfig","before","bombs","width","height","it","result","startBattle","newBattle","opened","invalidPos","x","y","clickPosition","allPositions","field","map","p","should","be","equal","valid","not","openedFirst","openedSecond","result2","valid2","find","propEq","console","log","battleMarkPosition"],"mappings":"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","file":"Battle.test.js","sourcesContent":["import { ok } from 'ptz-assert';\nimport R from 'ramda';\nimport * as battle from './Battle';\nimport * as Field from './Field';\ndescribe('Battle', () => {\n    describe('startBattle', () => {\n        let fieldConfig;\n        before('Set field config', () => {\n            fieldConfig = {\n                bombs: 9, width: 9, height: 9\n            };\n        });\n        it('returns new battle', () => {\n            const result = battle.startBattle(fieldConfig);\n            ok(result);\n        });\n    });\n    describe('clickPosition', () => {\n        let fieldConfig;\n        before('Set field config', () => {\n            fieldConfig = {\n                bombs: 9, width: 9, height: 9\n            };\n        });\n        it('shold not open if position is invalid ', () => {\n            const newBattle = battle.startBattle(fieldConfig);\n            let opened = 0;\n            const invalidPos = { x: -1, y: -1 };\n            const result = battle.clickPosition(newBattle, invalidPos);\n            Field.allPositions(result.field).map(p => p.opened ? opened++ : opened);\n            opened.should.be.equal(0);\n        });\n        it('shold open if position is valid ', () => {\n            const newBattle = battle.startBattle(fieldConfig);\n            let opened = 0;\n            const valid = { x: 1, y: 1 };\n            const result = battle.clickPosition(newBattle, valid);\n            Field.allPositions(result.field).map(p => p.opened ? opened++ : opened);\n            opened.should.not.be.equal(0);\n        });\n        it('shold not open if position is open', () => {\n            const newBattle = battle.startBattle(fieldConfig);\n            let openedFirst = 0;\n            let openedSecond = 0;\n            const valid = { x: 1, y: 1 };\n            const result = battle.clickPosition(newBattle, valid);\n            const result2 = battle.clickPosition(result, valid);\n            Field.allPositions(result.field).map(p => p.opened ? openedFirst++ : openedFirst);\n            Field.allPositions(result2.field).map(p => p.opened ? openedSecond++ : openedSecond);\n            openedFirst.should.be.equal(openedSecond);\n        });\n        it('shold open if position is not open', () => {\n            const newBattle = battle.startBattle(fieldConfig);\n            let openedFirst = 0;\n            let openedSecond = 0;\n            const valid = { x: 1, y: 1 };\n            const result = battle.clickPosition(newBattle, valid);\n            let valid2;\n            valid2 = R.find(R.propEq('opened', false), Field.allPositions(result.field));\n            Field.allPositions(result.field).map(p => p.opened ? openedFirst++ : openedFirst);\n            const result2 = battle.clickPosition(result, valid2);\n            Field.allPositions(result2.field).map(p => p.opened ? openedSecond++ : openedSecond);\n            openedFirst.should.be.not.equal(openedSecond);\n        });\n    });\n    describe('markPosition', () => {\n        let fieldConfig;\n        before('Set field config', () => {\n            fieldConfig = {\n                bombs: 9, width: 9, height: 9\n            };\n        });\n        it('returns new battle', () => {\n            const newBattle = battle.startBattle(fieldConfig);\n            const valid = { x: 1, y: 1 };\n            console.log(newBattle.field[valid.x][valid.y]);\n            const result = battle.battleMarkPosition(newBattle, valid);\n            console.log(result.field[valid.x][valid.y]);\n            ok(result);\n        });\n    });\n});\n//# sourceMappingURL=Battle.test.js.map"]}
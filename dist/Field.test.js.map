{"version":3,"sources":["../dist-esnext/Field.test.js"],"names":["a","Field","should","validFieldConfig","bombs","width","height","invalidFieldConfig","validPos","x","y","invalidPos","initialField","getInitialField","emptyField","getEmptyField","describe","be","an","it","skip","allPositions","map","p","isBomb","equal","length","bombedField","getBombedField","invalidField","not","exist","e","countedField","countNearBombs","flattenField","flatten","isBombeb","pos","bombedPos","find","nearBombebPos","validNearPos","nearBombs","above","closedPosition","newPos","openedPosition","openPosition","opened","true","nearPos","nearPositions","isValid","positionIsValid","false","validateFn","np","validatedpos"],"mappings":"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","file":"Field.test.js","sourcesContent":["import chai from 'chai';\nimport * as a from 'chai';\nimport R from 'ramda';\n// import { LogFile } from 'ptz-log-file';\nimport * as Field from './Field';\nconst should = a.should();\nchai.should();\n// import { IPosition } from './IPosition';\n// const log = LogFile({});'\nconst validFieldConfig = { bombs: 9, width: 9, height: 9 };\nconst invalidFieldConfig = { bombs: 27, width: 5, height: 5 };\nconst validPos = { x: 0, y: 0 };\nconst invalidPos = { x: -1, y: -1 };\nconst initialField = Field.getInitialField(validFieldConfig);\nconst emptyField = Field.getEmptyField(validFieldConfig);\ndescribe('Field', () => {\n    describe('getEmptyField', () => {\n        emptyField.should.be.an('array');\n        it.skip('should have no bombs', () => {\n            let bombs = 0;\n            Field.allPositions(emptyField).map(p => p.isBomb ? bombs++ : bombs);\n            bombs.should.be.equal(0);\n        });\n        it('should field size match fieldConfig size', () => {\n            emptyField.length.should.be.equal(validFieldConfig.width);\n            emptyField[0].length.should.be.equal(validFieldConfig.height);\n        });\n    });\n    describe('getBombedField', () => {\n        const bombedField = Field.getBombedField(emptyField, validFieldConfig);\n        bombedField.should.be.an('array');\n        it('should match bombs in the field with fieldConfig bombs', () => {\n            let bombs = 0;\n            Field.allPositions(bombedField).map(p => p.isBomb ? bombs++ : bombs);\n            bombs.should.be.equal(validFieldConfig.bombs);\n        });\n        it('should throw an error if bombs number is bigger than fild size', () => {\n            try {\n                const invalidField = Field.getInitialField(invalidFieldConfig);\n                should.not.exist(invalidField);\n            }\n            catch (e) {\n                e.should.be.an('error');\n            }\n        });\n    });\n    describe('countNearBombs', () => {\n        it('should increase near bombs', () => {\n            const countedField = Field.countNearBombs(initialField);\n            const flattenField = R.flatten(countedField);\n            const isBombeb = (pos) => pos.isBomb;\n            const bombedPos = R.find(isBombeb, flattenField);\n            const nearBombebPos = (pos) => Field.validNearPos(initialField, pos);\n            nearBombebPos(bombedPos).map(p => countedField[p.x][p.y].nearBombs.should.be.above(0));\n            countedField.should.be.an('array');\n        });\n    });\n    describe('openPosition', () => {\n        it('should return a opened position', () => {\n            const closedPosition = Field.newPos(1, 1);\n            const openedPosition = Field.openPosition(closedPosition);\n            // tslint:disable-next-line:no-unused-expression\n            openedPosition.opened.should.be.true;\n        });\n    });\n    describe('nearPositions', () => {\n        it('should return near positions', () => {\n            const nearPos = Field.nearPositions(validPos);\n            nearPos.should.be.an('array');\n        });\n    });\n    describe('positionIsValid', () => {\n        it('should return true if position is valid', () => {\n            const isValid = Field.positionIsValid(initialField, validPos);\n            // tslint:disable-next-line:no-unused-expression\n            isValid.should.be.true;\n        });\n        it('should return false if position is invalid', () => {\n            const isValid = Field.positionIsValid(initialField, invalidPos);\n            // tslint:disable-next-line:no-unused-expression\n            isValid.should.be.false;\n        });\n    });\n    describe('validNearPositions', () => {\n        it('should return only valid near positions', () => {\n            const nearPos = Field.validNearPos(initialField, validPos);\n            const validateFn = (np) => np.map(Field.positionIsValid(initialField));\n            const validatedpos = validateFn(nearPos);\n            validatedpos.map(p => p.should.be.true);\n            nearPos.should.be.an('array');\n        });\n    });\n});\n//# sourceMappingURL=Field.test.js.map"]}
{"version":3,"sources":["../dist-esnext/Battle.js"],"names":["startBattle","fieldConfig","width","heigth","bombs","field","battle","isOver","gameOver","finalField","map","col","pos","x","y","opened","positionIsInvalid","position","length","openPosition","isBomb","console","log","nearBombs","i","j"],"mappings":";;;;;;;AAAA;;AACA,SAASA,WAAT,GAAuB;AACnB,QAAMC,cAAc;AAChBC,eAAO,CADS;AAEhBC,gBAAQ,CAFQ;AAGhBC,eAAO;AAHS,KAApB;AAKA,QAAMC,QAAQ,4BAAgBJ,WAAhB,CAAd;AACA,QAAMK,SAAS;AACXD,oBADW;AAEXE,gBAAQ;AAFG,KAAf;AAIA,WAAOD,MAAP;AACH;AACD,SAASE,QAAT,CAAkBH,KAAlB,EAAyB;AACrB,QAAMI,aAAaJ,KAAnB;AACAA,UAAMK,GAAN,CAAU;AAAA,eAAOC,IAAID,GAAJ,CAAQ;AAAA,mBAAOD,WAAWG,IAAIC,CAAf,EAAkBD,IAAIE,CAAtB,EAAyBC,MAAzB,GAAkC,IAAzC;AAAA,SAAR,CAAP;AAAA,KAAV;AACA,WAAON,UAAP;AACH;AACD,SAASO,iBAAT,CAA2BX,KAA3B,EAAkCY,QAAlC,EAA4C;AACxC,WAAOA,SAASJ,CAAT,GAAa,CAAb,IAAkBI,SAASJ,CAAT,IAAcR,MAAMa,MAAtC,IAAgDD,SAASH,CAAT,GAAa,CAA7D,IAAkEG,SAASH,CAAT,IAAcT,MAAM,CAAN,EAASa,MAAhG;AACH;AACD,SAASC,YAAT,CAAsBb,MAAtB,EAA8BW,QAA9B,EAAwC;AACpC,QAAID,kBAAkBV,OAAOD,KAAzB,EAAgCY,QAAhC,CAAJ,EACI,OAAOX,MAAP;AACJ,QAAMM,MAAMN,OAAOD,KAAP,CAAaY,SAASJ,CAAtB,EAAyBI,SAASH,CAAlC,CAAZ;AACA,QAAIF,IAAIG,MAAR,EACI,OAAOT,MAAP;AACJ,QAAIM,IAAIQ,MAAR,EAAgB;AACZd,eAAOC,MAAP,GAAgB,IAAhB;AACAD,eAAOD,KAAP,GAAeG,SAASF,OAAOD,KAAhB,CAAf;AACAgB,gBAAQC,GAAR,CAAY,YAAZ,EAA0BL,QAA1B;AACA,eAAOX,MAAP;AACH;AACDM,QAAIG,MAAJ,GAAa,IAAb;AACA,QAAIH,IAAIW,SAAJ,KAAkB,CAAtB,EACI,KAAK,IAAIC,IAAI,CAAC,CAAd,EAAiBA,IAAI,CAArB,EAAwBA,GAAxB,EAA6B;AACzB,aAAK,IAAIC,IAAI,CAAC,CAAd,EAAiBA,IAAI,CAArB,EAAwBA,GAAxB,EAA6B;AACzB,gBAAID,MAAM,CAAN,IAAWC,MAAM,CAArB,EACI;AACJnB,qBAASa,aAAab,MAAb,EAAqB,EAAEO,GAAGD,IAAIC,CAAJ,GAAQW,CAAb,EAAgBV,GAAGF,IAAIE,CAAJ,GAAQW,CAA3B,EAArB,CAAT;AACH;AACJ;AACL,WAAOnB,MAAP;AACH;QACQN,W,GAAAA,W;QAAamB,Y,GAAAA,Y;AACtB","file":"Battle.js","sourcesContent":["import { getInitialField } from './Field';\nfunction startBattle() {\n    const fieldConfig = {\n        width: 9,\n        heigth: 9,\n        bombs: 9\n    };\n    const field = getInitialField(fieldConfig);\n    const battle = {\n        field,\n        isOver: false\n    };\n    return battle;\n}\nfunction gameOver(field) {\n    const finalField = field;\n    field.map(col => col.map(pos => finalField[pos.x][pos.y].opened = true));\n    return finalField;\n}\nfunction positionIsInvalid(field, position) {\n    return position.x < 0 || position.x >= field.length || position.y < 0 || position.y >= field[0].length;\n}\nfunction openPosition(battle, position) {\n    if (positionIsInvalid(battle.field, position))\n        return battle;\n    const pos = battle.field[position.x][position.y];\n    if (pos.opened)\n        return battle;\n    if (pos.isBomb) {\n        battle.isOver = true;\n        battle.field = gameOver(battle.field);\n        console.log('GAME OVER!', position);\n        return battle;\n    }\n    pos.opened = true;\n    if (pos.nearBombs === 0)\n        for (let i = -1; i < 2; i++) {\n            for (let j = -1; j < 2; j++) {\n                if (i === 0 && j === 0)\n                    continue;\n                battle = openPosition(battle, { x: pos.x + i, y: pos.y + j });\n            }\n        }\n    return battle;\n}\nexport { startBattle, openPosition };\n//# sourceMappingURL=Battle.js.map"]}